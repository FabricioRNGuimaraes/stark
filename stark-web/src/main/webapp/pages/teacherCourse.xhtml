<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="body">

		<p:panel id="teacherCourseTable">
		 	<p:dataTable var="teacherCourse" value="#{teacherCourseBean.teacherCourses}" rows="5"  
		 				 emptyMessage="There are no teacher courses" paginator="true" paginatorPosition="bottom" >  
	
		        <p:column filterBy="#{teacherCourse.teacher.name}" filterMatchMode="contains" headerText="Teacher Name" 
		        		  sortBy="#{teacherCourse.teacher.name}">  
		            <h:outputText value="#{teacherCourse.teacher.name}" />  
		        </p:column>
		  
		  		<p:column headerText="Course" sortBy="#{teacherCourse.course}" >  
		            <h:outputText value="#{teacherCourse.course.description}" />  
		        </p:column>

				<p:column headerText="Value" sortBy="#{teacherCourse.value}" >  
		            <h:outputText value="#{teacherCourse.valueCourse}" />  
		        </p:column>

		  		<p:column style="width:22%" headerText="Actions">
					
               		<p:commandButton oncomplete="visualizeDialog.show();" icon="visualizeIcon" 
									 title="visualize" process="@this" update=":formGrid:panelGridDialog">
               			<f:setPropertyActionListener value="#{teacherCourse}" target="#{teacherCourseBean.teacherCourseViewRemove}" />
           			</p:commandButton>
           			
           			<p:commandButton update=":formGrid:mainPanel" icon="editIcon" actionListener="#{teacherCourseBean.prepareEdit}" title="edit"
           							 process="@this" >
               			<f:setPropertyActionListener value="#{teacherCourse}" target="#{teacherCourseBean.teacherCourse}" />
           			</p:commandButton>
           			
           			<p:commandButton title="remove" oncomplete="removeTeacherCourse.show();" icon="removeIcon"
           							 process="@this" update=":formGrid:removeTeacherCourse">
               			<f:setPropertyActionListener value="#{teacherCourse}" target="#{teacherCourseBean.teacherCourseViewRemove}" />
           			</p:commandButton>
       			</p:column>  
		  
		        <f:facet name="footer" >  
		            There are #{teacherCourseBean.teacherCourses.size()} teacher courses
		        </f:facet>  
			  
		    </p:dataTable>
		</p:panel>
	
		<p:panel id="mainPanel" header="Teacher Course Data">
  
			<p:panelGrid columns="2" styleClass="ui-panelGrid-stark" >
				<p:outputLabel for="teacher" value="Teacher" />
				<p:selectOneMenu id="teacher" value="#{teacherCourseBean.teacherCourse.teacher}" required="true" style="width: 300px !important"
									 requiredMessage="Teacher is required" styleClass="ui-selectOneMenu-stark" converter="entityConverter"> 
						<f:selectItem itemLabel="Select One..." />
						<f:selectItems value="#{teacherCourseBean.teachers}" itemLabel="#{teacher.name}" var="teacher" 
									   itemValue="#{teacher}" />
				</p:selectOneMenu>

				<p:outputLabel for="course" value="Course" />
				<p:selectOneRadio id="course" value="#{teacherCourseBean.teacherCourse.course}" converter="entityConverter"
								  required="true" requiredMessage="Course is required">
						<f:selectItems value="#{teacherCourseBean.courses}" itemLabel="#{course.description}" var="course" 
									   itemValue="#{course}" />
				
				</p:selectOneRadio>

				<p:outputLabel for="value" value="Value"  />
				<p:inputMask mask="999.99" id="value" size="10" value="#{teacherCourseBean.teacherCourse.valueCourse}" 
							 converter="doubleConverter" required="true" requiredMessage="Value is required"/>
				
				<p:outputLabel for="paymentDay" value="Payment Day"/>
				<p:inputText size="3" id="paymentDay" value="#{teacherCourseBean.teacherCourse.paymentDay}" required="true" 
							 requiredMessage="Payment Day is required" maxlength="2"/>
							 
 				<p:outputLabel for="registration" value="Registration" />
				<p:calendar id="registration" value="#{teacherCourseBean.teacherCourse.registration}" showOn="button" size="7" navigator="true"
							    required="true" requiredMessage="Registration is required" />
					
			</p:panelGrid>

			<p:commandButton icon="saveIcon" actionListener="#{teacherCourseBean.save}"
							 value="#{teacherCourseBean.isEditEntity ? 'Update' : 'Save'}" 
							 update="teacherCourseTable :formGrid:growl :formGrid:mainPanel" oncomplete="cleanFields();"/>

			<p:commandButton icon="eraserIcon" value="#{teacherCourseBean.isEditEntity ? 'Cancel' : 'Clean'}" 
							 oncomplete="cleanFields();" />
		</p:panel>

		<p:confirmDialog id="removeTeacherCourse" widgetVar="removeTeacherCourse" header="Remove" resizable="false" 
						 appendToBody="true" message="Remove #{teacherCourseBean.teacherCourseViewRemove.teacher.name} ?" >

			<h:panelGrid columns="2">
				<p:commandButton value="No" oncomplete="removeTeacherCourse.hide();" />

				<p:commandButton value="Yes" actionListener="#{teacherCourseBean.remove}" immediate="true" process="@this"
					oncomplete="removeTeacherCourse.hide(); cleanFields();" update="teacherCourseTable :formGrid:growl :formGrid:mainPanel" />
			</h:panelGrid>
		</p:confirmDialog>

		<p:dialog modal="true" widgetVar="visualizeDialog" appendToBody="true" resizable="false" width="700" dynamic="false" >

				<h:panelGrid id="panelGridDialog" columns="2" cellpadding="5">  
                	<h:outputLabel for="dialogName" value="Name: " />  
                	<h:outputText id="dialogName" value="#{teacherCourseBean.teacherCourseViewRemove.teacher.name}" />
                	
                	<h:outputLabel for="dialogCourse" value="Course: " />  
                	<h:outputText id="dialogCourse" value="#{teacherCourseBean.teacherCourseViewRemove.course.description}" />
                	
                	<h:outputLabel for="dialogValue" value="Value: " />  
                	<h:outputText id="dialogValue" value="#{teacherCourseBean.teacherCourseViewRemove.valueCourse}" />
                	
                	<h:outputLabel for="dialogPaymentDay" value="Payment Day: " />  
                	<h:outputText id="dialogPaymentDay" value="#{teacherCourseBean.teacherCourseViewRemove.paymentDay}" />
                	
                	<h:outputLabel for="dialogRegistration" value="Registration Day: " />  
                	<h:outputText id="dialogRegistration" value="#{teacherCourseBean.teacherCourseViewRemove.registration}" />
                </h:panelGrid>

                <p:commandButton title="Close" icon="removeIcon" value="Close" onclick="visualizeDialog.hide()"/>
		</p:dialog>
		
		<p:remoteCommand name="cleanFields" actionListener="#{teacherCourseBean.clean}" update="mainPanel" immediate="true" process="@this" />
		<p:hotkey bind="esc" handler="visualizeDialog.hide(); removeTeacherCourse.hide()" />
	</ui:define>
</ui:composition>